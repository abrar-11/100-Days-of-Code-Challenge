<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="stylesheet" type="text/css" href="css/style.css" />
      <title>Nodejs Login and Registration JWT</title>
   </head>
   <body>
    <div class="container">
      <section class="update-section">
         <h1 class="section-title">Welcome to Nodejs Express Form</h1>
         <div class="forms">
            <div class="form-wrapper is-active">
               <button type="button" class="switcher switcher-login">
                    Update
                  <span class="underline"></span>
               </button>
               <form class="form form-login" id="update-form">
                  <fieldset>
                     <legend>
                        Please, enter your new password.
                     </legend>
                     <div class="input-block">
                        <label for="update-password">password</label>
                        <input
                           id="update-password"
                           type="password"
                           required
                        />
                     </div>
                   
                  <button type="submit" class="btn-login">Update</button>
                  <a href="/index.html">back</a>
               </form>
            </div>
      
         </div>
      </section>
      
      
    </div>
      <script>
   
         //  Handling Update Form

         const update_form = document.getElementById("update-form");
         update_form.addEventListener("submit",async (event) => {
            event.preventDefault();
         
            const password = document.getElementById("update-password").value;


            const result =await fetch('/api/update-password',{
                method: 'POST',
                headers:{
                    'content-type': 'application/json',
                },
                body:JSON.stringify({
                    token:localStorage.getItem('token'),
                    new_password:password,
                })
            }).then((res)=>res.json())

            console.log(result)

            if(result.status = 'success'){
               console.log(result)
            }

         });

    

      </script>
   </body>
</html>
